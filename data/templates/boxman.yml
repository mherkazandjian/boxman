---
# The top level boxman application configuration file, typically the default location
# of this file is in ~/.config/boxman/boxman.yml
#
# If this file does not exist at the default location, boxman will create it
# automatically with sensible defaults (system paths for libvirt tools,
# verbose: False, use_sudo: False).

# The default runtime environment for executing provider commands.
# Can be overridden on the CLI with: boxman --runtime <value> <subcommand>
# Supported values:
#   local            - execute provider commands directly on the host (default)
#   docker           - execute inside the boxman docker-compose container
runtime: local

# Runtime-specific settings (used when runtime != local)
runtime_config:
  # Docker container name used by 'docker exec' (docker-compose runtime)
  runtime_container: boxman-libvirt-default
  # Optional: explicit path to docker-compose.yml. When omitted, boxman
  # uses the bundled compose file shipped with the package.
  # compose_file: ~/projects/boxman/containers/docker/docker-compose.yml
  # Optional: project directory to bind-mount into the container.
  # Defaults to the directory containing conf.yml. This allows the
  # container to access workdir files (network XML, disk images, etc.)
  # at the same absolute path as on the host.
  # project_dir: ~/projects/my-infra
  #
  # Workdirs are extracted automatically from conf.yml clusters and
  # injected as bind-mount volumes into the docker-compose.yml before
  # the container is started. No manual configuration needed.

# Global SSH configuration applied across all providers (libvirt, docker, etc.)
# Keys listed here are injected into all managed guests/containers.
#
# Config files (conf.yml, boxman.yml) are rendered as Jinja2 templates.
# The following helper functions are available:
#
#   {{ env("VAR") }}                            - value of $VAR, empty string if unset
#   {{ env("VAR", default="fallback") }}        - value of $VAR, "fallback" if unset
#   {{ env_required("VAR") }}                   - value of $VAR, error if unset
#   {{ env_required("VAR", "custom message") }} - value of $VAR, custom error if unset
#   {{ env_is_set("VAR") }}                     - True/False
#
# Legacy format (resolved at runtime, not at template render time):
#   ${env:VAR}         - resolved by BoxmanManager.fetch_value()
#   file://path        - resolved by BoxmanManager.fetch_value()
ssh:
  authorized_keys:
    # Each entry can be:
    #   - a literal public key string:  "ssh-ed25519 AAAAC3... user@host"
    #   - a file reference:             file://~/.ssh/id_ed25519.pub
    #   - an env variable:              {{ env("BOXMAN_SSH_PUBKEY") }}
    - {{ env("BOXMAN_SSH_PUBKEY") }}
    # - file://~/.ssh/id_ed25519.pub
    # - "ssh-ed25519 AAAAC3... user@host"

# section for provider specific configuration
providers:
  # configuration for libvirt provider
  libvirt:
    # the libvirt connection uri
    uri: qemu:///system
    # whether to use sudo for libvirt commands
    use_sudo: False
    # path to libvirt related commands (use system paths by default)
    virt_install_cmd: virt-install
    # path to virt-clone command
    virt_clone_cmd: virt-clone
    # path to virsh command
    virsh_cmd: virsh
    # specify the verbosity of libvirt commands
    verbose: False
